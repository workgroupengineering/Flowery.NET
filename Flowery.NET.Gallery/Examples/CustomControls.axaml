<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="clr-namespace:Flowery.Controls;assembly=Flowery.NET"
             xmlns:custom="clr-namespace:Flowery.Controls.Custom;assembly=Flowery.NET"
             xmlns:weather="clr-namespace:Flowery.Controls.Custom.Weather;assembly=Flowery.NET"
             xmlns:models="clr-namespace:Flowery.Controls.Custom.Weather.Models;assembly=Flowery.NET"
             xmlns:local="clr-namespace:Flowery.NET.Gallery.Examples"
             x:Class="Flowery.NET.Gallery.Examples.CustomControls">

    <ScrollViewer x:Name="MainScrollViewer" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Spacing="24" Margin="24,10,24,32">

            <!-- Modifier Keys -->
            <StackPanel Spacing="12">
                <local:SectionHeader SectionId="modifier-keys" Title="Modifier Keys" />
                <TextBlock Text="Live keyboard state observer - Press Shift, Ctrl, Alt or toggle Caps/Num Lock" FontSize="12" Opacity="0.7"/>
                <WrapPanel Orientation="Horizontal">
                    <StackPanel Spacing="10" Margin="0,0,40,20">
                        <custom:DaisyModifierKeys />
                        <custom:DaisyModifierKeys ShowCapsLock="False" ShowNumLock="False" />
                    </StackPanel>
                </WrapPanel>
            </StackPanel>

            <controls:DaisyDivider />

            <!-- Weather Card (Full Composite) -->
            <StackPanel Spacing="12">
                <local:SectionHeader SectionId="weather-card" Title="Weather Card" />
                <TextBlock Text="Complete weather widget with current conditions, forecast, and metrics."
                           FontSize="12" Opacity="0.7" Margin="0,0,0,8"/>
                <WrapPanel Orientation="Horizontal">
                    <weather:DaisyWeatherCard
                        x:Name="FullWeatherCard"
                        Margin="0,0,24,24"
                        Width="420"
                        Temperature="8"
                        FeelsLike="5"
                        Condition="PartlyCloudy"
                        Date="2025-07-15"
                        Sunrise="07:33"
                        Sunset="17:20"
                        UvIndex="0" UvMax="1"
                        WindSpeed="9" WindMax="13"
                        Humidity="78" HumidityMax="86" />

                    <!-- Compact version without metrics -->
                    <weather:DaisyWeatherCard
                        x:Name="CompactWeatherCard"
                        Margin="0,0,24,24"
                        Width="380"
                        Temperature="22"
                        FeelsLike="24"
                        Condition="Sunny"
                        Date="2025-07-15"
                        Sunrise="05:45"
                        Sunset="20:30"
                        ShowMetrics="False" />
                </WrapPanel>
            </StackPanel>

            <controls:DaisyDivider />

            <!-- Current Weather Component -->
            <StackPanel Spacing="12">
                <local:SectionHeader SectionId="current-weather" Title="Current Weather" />
                <TextBlock Text="Standalone current weather display with temperature, condition, and sun times."
                           FontSize="12" Opacity="0.7" Margin="0,0,0,8"/>
                <WrapPanel Orientation="Horizontal">
                    <controls:DaisyCard Margin="0,0,24,24" Padding="16">
                        <weather:DaisyWeatherCurrent
                            Temperature="15"
                            FeelsLike="13"
                            Condition="Cloudy"
                            Date="2025-07-15"
                            Sunrise="06:15"
                            Sunset="21:00" />
                    </controls:DaisyCard>

                    <controls:DaisyCard Margin="0,0,24,24" Padding="16">
                        <weather:DaisyWeatherCurrent
                            Temperature="28"
                            FeelsLike="32"
                            Condition="Sunny"
                            TemperatureUnit="C"
                            Date="2025-07-15"
                            ShowSunTimes="False" />
                    </controls:DaisyCard>

                    <controls:DaisyCard Margin="0,0,24,24" Padding="16">
                        <weather:DaisyWeatherCurrent
                            Temperature="-5"
                            FeelsLike="-12"
                            Condition="Snow"
                            Date="2025-01-15"
                            Sunrise="08:30"
                            Sunset="16:45" />
                    </controls:DaisyCard>
                </WrapPanel>
            </StackPanel>

            <controls:DaisyDivider />

            <!-- Forecast Component -->
            <StackPanel Spacing="12">
                <local:SectionHeader SectionId="weather-forecast" Title="Weather Forecast" />
                <TextBlock Text="Horizontal forecast strip showing upcoming days."
                           FontSize="12" Opacity="0.7" Margin="0,0,0,8"/>
                <WrapPanel Orientation="Horizontal">
                    <controls:DaisyCard Margin="0,0,24,24" Padding="16">
                        <weather:DaisyWeatherForecast x:Name="ForecastStrip" />
                    </controls:DaisyCard>
                </WrapPanel>
            </StackPanel>

            <controls:DaisyDivider />

            <!-- Metrics Component -->
            <StackPanel Spacing="12">
                <local:SectionHeader SectionId="weather-metrics" Title="Weather Metrics" />
                <TextBlock Text="Detailed metrics table showing UV, wind, and humidity."
                           FontSize="12" Opacity="0.7" Margin="0,0,0,8"/>
                <WrapPanel Orientation="Horizontal">
                    <weather:DaisyWeatherMetrics
                        Margin="0,0,24,24"
                        UvIndex="0" UvMax="1"
                        WindSpeed="9" WindMax="13" WindUnit="km/h"
                        Humidity="78" HumidityMax="86" />

                    <weather:DaisyWeatherMetrics
                        Margin="0,0,24,24"
                        UvIndex="7" UvMax="9"
                        WindSpeed="15" WindMax="25" WindUnit="mph"
                        Humidity="45" HumidityMax="60" />
                </WrapPanel>
            </StackPanel>

            <controls:DaisyDivider />

            <!-- Weather Conditions Gallery -->
            <StackPanel Spacing="12">
                <local:SectionHeader SectionId="weather-conditions" Title="Weather Conditions" />
                <TextBlock Text="All available weather condition icons."
                           FontSize="12" Opacity="0.7" Margin="0,0,0,8"/>
                <WrapPanel Orientation="Horizontal">
                    <StackPanel Margin="8" HorizontalAlignment="Center">
                        <PathIcon Width="32" Height="32" Data="{StaticResource WeatherIconSunny}" Foreground="{DynamicResource DaisyWarningBrush}" />
                        <TextBlock Text="Sunny" FontSize="10" HorizontalAlignment="Center" Margin="0,4,0,0" />
                    </StackPanel>
                    <StackPanel Margin="8" HorizontalAlignment="Center">
                        <PathIcon Width="32" Height="32" Data="{StaticResource WeatherIconPartlyCloudy}" Foreground="{DynamicResource DaisyInfoBrush}" />
                        <TextBlock Text="Partly Cloudy" FontSize="10" HorizontalAlignment="Center" Margin="0,4,0,0" />
                    </StackPanel>
                    <StackPanel Margin="8" HorizontalAlignment="Center">
                        <PathIcon Width="32" Height="32" Data="{StaticResource WeatherIconCloudy}" Foreground="{DynamicResource DaisyBaseContentBrush}" />
                        <TextBlock Text="Cloudy" FontSize="10" HorizontalAlignment="Center" Margin="0,4,0,0" />
                    </StackPanel>
                    <StackPanel Margin="8" HorizontalAlignment="Center">
                        <PathIcon Width="32" Height="32" Data="{StaticResource WeatherIconOvercast}" Foreground="{DynamicResource DaisyBaseContentBrush}" />
                        <TextBlock Text="Overcast" FontSize="10" HorizontalAlignment="Center" Margin="0,4,0,0" />
                    </StackPanel>
                    <StackPanel Margin="8" HorizontalAlignment="Center">
                        <PathIcon Width="32" Height="32" Data="{StaticResource WeatherIconRain}" Foreground="{DynamicResource DaisyInfoBrush}" />
                        <TextBlock Text="Rain" FontSize="10" HorizontalAlignment="Center" Margin="0,4,0,0" />
                    </StackPanel>
                    <StackPanel Margin="8" HorizontalAlignment="Center">
                        <PathIcon Width="32" Height="32" Data="{StaticResource WeatherIconHeavyRain}" Foreground="{DynamicResource DaisyInfoBrush}" />
                        <TextBlock Text="Heavy Rain" FontSize="10" HorizontalAlignment="Center" Margin="0,4,0,0" />
                    </StackPanel>
                    <StackPanel Margin="8" HorizontalAlignment="Center">
                        <PathIcon Width="32" Height="32" Data="{StaticResource WeatherIconThunderstorm}" Foreground="{DynamicResource DaisyErrorBrush}" />
                        <TextBlock Text="Thunderstorm" FontSize="10" HorizontalAlignment="Center" Margin="0,4,0,0" />
                    </StackPanel>
                    <StackPanel Margin="8" HorizontalAlignment="Center">
                        <PathIcon Width="32" Height="32" Data="{StaticResource WeatherIconSnow}" Foreground="{DynamicResource DaisySecondaryBrush}" />
                        <TextBlock Text="Snow" FontSize="10" HorizontalAlignment="Center" Margin="0,4,0,0" />
                    </StackPanel>
                    <StackPanel Margin="8" HorizontalAlignment="Center">
                        <PathIcon Width="32" Height="32" Data="{StaticResource WeatherIconMist}" Foreground="{DynamicResource DaisyBaseContentBrush}" />
                        <TextBlock Text="Mist/Fog" FontSize="10" HorizontalAlignment="Center" Margin="0,4,0,0" />
                    </StackPanel>
                    <StackPanel Margin="8" HorizontalAlignment="Center">
                        <PathIcon Width="32" Height="32" Data="{StaticResource WeatherIconWindy}" Foreground="{DynamicResource DaisyAccentBrush}" />
                        <TextBlock Text="Windy" FontSize="10" HorizontalAlignment="Center" Margin="0,4,0,0" />
                    </StackPanel>
                </WrapPanel>
            </StackPanel>

            <controls:DaisyDivider />

            <!-- Service Integration Info -->
            <StackPanel Spacing="12">
                <local:SectionHeader SectionId="service-integration" Title="Service Integration" />
                <controls:DaisyAlert Variant="Info">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Using Weather Services" FontWeight="SemiBold" />
                        <TextBlock TextWrapping="Wrap" Text="The weather widgets support automatic data fetching via IWeatherService. Set the WeatherService and Location properties to enable:" />
                        <controls:DaisyCard Variant="Compact" Background="{DynamicResource DaisyBase200Brush}">
                            <TextBlock FontFamily="Consolas" FontSize="12" xml:space="preserve" TextWrapping="Wrap"><![CDATA[<weather:DaisyWeatherCard Location="London,UK">
    <weather:DaisyWeatherCard.WeatherService>
        <services:OpenWeatherMapService ApiKey="YOUR_API_KEY" />
    </weather:DaisyWeatherCard.WeatherService>
</weather:DaisyWeatherCard>]]></TextBlock>
                        </controls:DaisyCard>
                        <TextBlock TextWrapping="Wrap" Opacity="0.8" Text="Get a free API key from openweathermap.org to use the built-in OpenWeatherMapService, or implement IWeatherService for custom providers." />
                    </StackPanel>
                </controls:DaisyAlert>
            </StackPanel>

            <controls:DaisyDivider />

            <!-- Live Test Section -->
            <StackPanel Spacing="12">
                <local:SectionHeader Title="Live API Test" />
                <TextBlock Text="Test the OpenWeatherMap service integration with your API key."
                           FontSize="12" Opacity="0.7" Margin="0,0,0,4"/>
                <controls:DaisyAlert Variant="Warning" Padding="8" Width="460" HorizontalAlignment="Left">
                    <TextBlock TextWrapping="Wrap" FontSize="12">
                        <Run FontWeight="SemiBold">Note:</Run>
                        <Run Text=" New OpenWeatherMap API keys can take up to 2 hours to activate after creation. If you get 'Invalid API key', please wait and try again later."/>
                    </TextBlock>
                </controls:DaisyAlert>

                <!-- Input Controls -->
                <controls:DaisyCard Padding="16" Width="460" HorizontalAlignment="Left">
                    <StackPanel Spacing="12">
                        <Grid ColumnDefinitions="100,*" RowDefinitions="Auto,Auto,Auto" RowSpacing="12">
                            <!-- API Key -->
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="API Key:" VerticalAlignment="Center" />
                            <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                <controls:DaisyInput x:Name="ApiKeyInput"
                                                     PasswordChar="â€¢"
                                                     Watermark="Enter your OpenWeatherMap API key"
                                                     Width="240" />
                                <controls:DaisyButton x:Name="TestApiKeyBtn"
                                                      Content="Test Key"
                                                      Size="Small"
                                                      ButtonStyle="Outline"
                                                      Click="TestApiKeyBtn_Click" />
                            </StackPanel>

                            <!-- Location -->
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Location:" VerticalAlignment="Center" />
                            <controls:DaisyInput x:Name="LocationInput" Grid.Row="1" Grid.Column="1"
                                                 Text="London,UK"
                                                 Watermark="City name (e.g., London,UK or New York,US)"
                                                 Width="320"
                                                 KeyDown="LocationInput_KeyDown" />

                            <!-- Buttons -->
                            <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                <controls:DaisyButton x:Name="FetchWeatherBtn"
                                                      Content="Fetch Weather"
                                                      Variant="Primary"
                                                      Click="FetchWeatherBtn_Click" />
                                <controls:DaisyButton x:Name="ClearResultsBtn"
                                                      Content="Clear"
                                                      Variant="Ghost"
                                                      Click="ClearResultsBtn_Click" />
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </controls:DaisyCard>

                <!-- Status Message -->
                <controls:DaisyAlert x:Name="StatusAlert" IsVisible="False" Width="460" HorizontalAlignment="Left">
                    <TextBlock x:Name="StatusMessage" TextWrapping="Wrap" />
                </controls:DaisyAlert>

                <!-- Live Result Card -->
                <StackPanel x:Name="LiveResultPanel" IsVisible="False" Margin="0,16,0,0">
                    <TextBlock Text="Live Weather Data:" FontWeight="SemiBold" Margin="0,0,0,8" />
                    <weather:DaisyWeatherCard x:Name="LiveWeatherCard"
                                              Width="460"
                                              HorizontalAlignment="Left" />
                </StackPanel>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</UserControl>
